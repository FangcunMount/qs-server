# ============================================================================
# qs-apiserver ç”Ÿäº§ç¯å¢ƒé…ç½®
# ============================================================================
# ç”¨é€”ï¼šQS ç³»ç»Ÿæ ¸å¿ƒ API æœåŠ¡ï¼Œæä¾› REST API å’Œ gRPC æœåŠ¡
# ç»´æŠ¤ï¼šè¿ç»´å›¢é˜Ÿ
# æ›´æ–°æ—¶é—´ï¼š2025-12-10
# ============================================================================

# ============================================================================
# 1. åº”ç”¨åŸºç¡€é…ç½®
# ============================================================================
app:
  name: "qs-apiserver"
  version: "1.0.0"
  mode: "production"  # development, production

# ============================================================================
# 2. æœåŠ¡ç«¯å£é…ç½®
# ============================================================================

# ----------------------------------------------------------------------------
# 2.1 RESTful HTTP/HTTPS æœåŠ¡é…ç½®
# ----------------------------------------------------------------------------
server:
    mode: release # ç”Ÿäº§ç¯å¢ƒé»˜è®¤ release
    healthz: true
    profiling: true # æ˜¯å¦å¼€å¯ pprofï¼ˆ/debug/pprofï¼‰ï¼Œç”¨äºç”Ÿæˆç«ç„°å›¾
    metrics: true # æ˜¯å¦å¼€å¯ Prometheus æŒ‡æ ‡ï¼ˆ/metricsï¼‰ï¼Œç”¨äºè§‚æµ‹ HTTP QPS/å»¶è¿Ÿ
    middlewares: recovery,enhanced_logger,secure,nocache,cors
    max-ping-count: 3

# HTTP REST API é…ç½®ï¼ˆä¸å®‰å…¨ï¼Œå†…ç½‘ä½¿ç”¨ï¼‰
# ç”¨é€”ï¼šå†…ç½‘æœåŠ¡é—´è°ƒç”¨ã€å¥åº·æ£€æŸ¥ï¼Œæ€§èƒ½ä¼˜å…ˆï¼ˆæ—  TLS æ¡æ‰‹å¼€é”€ï¼‰
# å®‰å…¨ç­–ç•¥ï¼šé€šè¿‡ Docker ç½‘ç»œéš”ç¦» + é˜²ç«å¢™è§„åˆ™é™åˆ¶è®¿é—®
insecure:
  bind-address: "0.0.0.0"
  bind-port: 8080

# HTTPS REST API é…ç½®ï¼ˆå®‰å…¨ï¼Œå¤–ç½‘è®¿é—®ï¼‰
# ç”¨é€”ï¼šå¤–éƒ¨å®¢æˆ·ç«¯è®¿é—®ï¼ˆç®¡ç†åå°ã€ç¬¬ä¸‰æ–¹æœåŠ¡ï¼‰
# è®¿é—®è·¯å¾„ï¼šå®¢æˆ·ç«¯ -> Nginx (443) -> qs-apiserver (8443)
secure:
  bind-address: "0.0.0.0"
  bind-port: 8443
  tls:
    # Web è¯ä¹¦ï¼ˆå®¹å™¨å†…è·¯å¾„ï¼Œç”± docker-compose ä»å®¿ä¸»æœºæŒ‚è½½ï¼‰
    cert-file: "/etc/qs-server/ssl/certs/yangshujie.com.crt"
    private-key-file: "/etc/qs-server/ssl/private/yangshujie.com.key"

# ----------------------------------------------------------------------------
# 2.2 gRPC æœåŠ¡é…ç½®ï¼ˆç”Ÿäº§ç¯å¢ƒ - å®‰å…¨æ¨¡å¼ï¼‰
# ----------------------------------------------------------------------------
# ç«¯å£ç­–ç•¥ï¼š
#   - 9090: gRPC æœåŠ¡ç«¯å£ï¼Œå¯ç”¨ mTLS åŒå‘è®¤è¯ï¼Œä»…é™å†…ç½‘å¯ä¿¡æœåŠ¡è®¿é—®
#   - 9091: å¥åº·æ£€æŸ¥ç«¯å£ï¼ŒHTTP åè®®ï¼Œä¾›ç›‘æ§ç³»ç»Ÿä½¿ç”¨ï¼ˆä¸éœ€è¦å®¢æˆ·ç«¯è¯ä¹¦ï¼‰
grpc:
  bind-address: "0.0.0.0"
  bind-port: 9090        # gRPC æœåŠ¡ç«¯å£
  healthz-port: 9091     # å¥åº·æ£€æŸ¥ç«¯å£ï¼ˆç‹¬ç«‹ HTTP ç«¯å£ï¼Œæ— éœ€ mTLSï¼‰
  
  # ç”Ÿäº§ç¯å¢ƒå¿…é¡»å¯ç”¨ TLS
  insecure: false
  # è¯ä¹¦è·¯å¾„ï¼ˆå®¿ä¸»æœº /data/infra/ssl/grpc â†’ å®¹å™¨ /etc/qs-server/ssl/grpcï¼‰
  tls-cert-file: "/etc/qs-server/ssl/grpc/server/qs-apiserver.crt"
  tls-key-file: "/etc/qs-server/ssl/grpc/server/qs-apiserver.key"
  
  # æ¶ˆæ¯å¤§å°é™åˆ¶
  max-msg-size: 4194304  # 4MB
  
  # è¿æ¥ç®¡ç†
  max-connection-age: 120s
  max-connection-age-grace: 20s
  
  # mTLS åŒå‘è®¤è¯é…ç½®ï¼ˆQS å†…éƒ¨æœåŠ¡ç®€åŒ–æ¨¡å¼ï¼‰
  # è¯´æ˜ï¼šQS ä¸‰ä»¶å¥—å†…éƒ¨é€šä¿¡ï¼Œé€šè¿‡ OU ç™½åå•ç®€åŒ–ç®¡ç†ï¼Œæ— éœ€ç»´æŠ¤ CN ç™½åå•
  mtls:
    enabled: true
    ca-file: "/etc/qs-server/ssl/grpc/ca/ca-chain.crt"  # CA è¯ä¹¦é“¾
    require-client-cert: true  # å¼ºåˆ¶å®¢æˆ·ç«¯æä¾›è¯ä¹¦
    
    # CN ç™½åå•ï¼šç•™ç©ºä»¥ç®€åŒ–ç®¡ç†ï¼ˆæ–°å¢ QS æœåŠ¡æ— éœ€ä¿®æ”¹é…ç½®ï¼‰
    allowed-cns: []
    
    # OU ç™½åå•ï¼šåªå…è®¸ QS ç»„ç»‡çš„æœåŠ¡è®¿é—®
    allowed-ous:
      - "QS"  # æ‰€æœ‰ OU=QS çš„è¯ä¹¦éƒ½å¯è®¿é—®ï¼ˆåŒ…æ‹¬ collection-server, evaluation-server ç­‰ï¼‰
    
    # TLS ç‰ˆæœ¬æ§åˆ¶
    min-tls-version: "1.2"
    
    # è¯ä¹¦è‡ªåŠ¨é‡è½½ï¼ˆç”Ÿäº§ç¯å¢ƒæ¨èï¼‰
    enable-auto-reload: true
    reload-interval: 5m
  
  # è®¤è¯é…ç½®ï¼ˆå¦‚éœ€å¯¹å¤–æš´éœ² gRPC API æ—¶å¯ç”¨ï¼‰
  auth:
    enabled: false  # å†…éƒ¨æœåŠ¡é€šä¿¡æ— éœ€ JWTï¼ŒmTLS å·²æä¾›èº«ä»½éªŒè¯
  
  # ACL é…ç½®ï¼ˆæœªæ¥æ‰©å±•ï¼‰
  acl:
    enabled: false
  
  # å®¡è®¡é…ç½®ï¼ˆæœªæ¥æ‰©å±•ï¼‰
  audit:
    enabled: false
  
  # åŠŸèƒ½å¼€å…³
  enable-reflection: false    # ç”Ÿäº§ç¯å¢ƒç¦ç”¨åå°„ï¼ˆå®‰å…¨è€ƒè™‘ï¼‰
  enable-health-check: true   # å¯ç”¨å¥åº·æ£€æŸ¥

# ============================================================================
# 3. æ•°æ®å­˜å‚¨é…ç½®
# ============================================================================

# ----------------------------------------------------------------------------
# 3.1 MySQL æ•°æ®åº“é…ç½®
# ----------------------------------------------------------------------------
mysql:
  host: "127.0.0.1:3306"
  username: "app_user"
  password: ""
  database: "qs"
  max-idle-connections: 10        # é™ä½ç©ºé—²è¿æ¥æ•°
  max-open-connections: 100       # é™ä½æœ€å¤§è¿æ¥æ•°ï¼ˆé˜¿é‡Œäº‘ RDS æœ‰é™åˆ¶ï¼‰
  max-connection-life-time: 30m   # ç¼©çŸ­è¿æ¥ç”Ÿå‘½å‘¨æœŸï¼Œé¿å…è¶…æ—¶
  max-idle-time: 10m              # æ·»åŠ ç©ºé—²è¶…æ—¶
  log-level: 4 # ç”Ÿäº§é™ä½æ—¥å¿—çº§åˆ«

# ----------------------------------------------------------------------------
# 3.2 æ•°æ®åº“è¿ç§»é…ç½®
# ----------------------------------------------------------------------------
migration:
  enabled: true   # ç”Ÿäº§ç¯å¢ƒå»ºè®®å¼€å¯
  autoseed: false
  database: "qs"

# ----------------------------------------------------------------------------
# 3.3 Redis é…ç½®ï¼ˆå•å®ä¾‹ï¼‰
# ----------------------------------------------------------------------------
redis:
  host: "127.0.0.1"
  port: 6379
  username: ""
  password: ""
  database: 0
  max-idle: 50
  max-active: 500
  timeout: 5
  min-idle-conns: 0
  pool-timeout: 5
  dial-timeout: 5
  read-timeout: 5
  write-timeout: 5
  enable-cluster: false
  use-ssl: false
# ----------------------------------------------------------------------------
# 3.4 ç¼“å­˜æ§åˆ¶
# ----------------------------------------------------------------------------
cache:
  disable_evaluation_cache: false # å¼€å¯æµ‹è¯„ç»“æœç¼“å­˜
  disable_statistics_cache: false # å¼€å¯ç»Ÿè®¡ç¼“å­˜
  ttl:                        # ç¼“å­˜æ—¶é—´ï¼Œå¯é…ç½®
    scale: "2h"              # é‡è¡¨ç¼“å­˜æ—¶é—´
    questionnaire: "2h"      # é—®å·ç¼“å­˜æ—¶é—´
    assessment_detail: "1h"    # æµ‹è¯„è¯¦æƒ…ç¼“å­˜æ—¶é—´
    assessment_status: "30m"   # æµ‹è¯„çŠ¶æ€ç¼“å­˜æ—¶é—´
    testee: "12h"              # å—è¯•è€…ç¼“å­˜æ—¶é—´
    plan: "12h"                # è®¡åˆ’ç¼“å­˜æ—¶é—´
  ttl_jitter_ratio: 0.1       # ç¼“å­˜æ—¶é—´æŠ–åŠ¨æ¯”ä¾‹
  statistics_warmup:          # ç»Ÿè®¡æŸ¥è¯¢ç»“æœç¼“å­˜é¢„çƒ­é…ç½®
    enable: true              # å¼€å¯ç»Ÿè®¡æŸ¥è¯¢ç»“æœç¼“å­˜é¢„çƒ­
    org_ids: [1]              # ç»„ç»‡IDåˆ—è¡¨ï¼ˆä»é…ç½®è¯»å–ï¼Œé»˜è®¤é¢„çƒ­æ‰€æœ‰ç»„ç»‡ï¼‰
    questionnaire_codes: []    # é—®å·ç¼–ç åˆ—è¡¨ï¼ˆä»é…ç½®è¯»å–ï¼Œé»˜è®¤é¢„çƒ­æ‰€æœ‰é—®å·ï¼‰
    plan_ids: []              # è®¡åˆ’IDåˆ—è¡¨ï¼ˆä»é…ç½®è¯»å–ï¼Œé»˜è®¤é¢„çƒ­æ‰€æœ‰è®¡åˆ’ï¼‰

# ----------------------------------------------------------------------------
# 3.4 é™æµé…ç½®
# ----------------------------------------------------------------------------
rate_limit:
  enabled: true
  submit_global_qps: 200
  submit_global_burst: 300
  submit_user_qps: 200
  submit_user_burst: 300
  admin_submit_global_qps: 200
  admin_submit_global_burst: 300
  admin_submit_user_qps: 200
  admin_submit_user_burst: 300
  query_global_qps: 200
  query_global_burst: 300
  query_user_qps: 200
  query_user_burst: 300
  wait_report_global_qps: 200
  wait_report_global_burst: 300
  wait_report_user_qps: 200
  wait_report_user_burst: 300

# ----------------------------------------------------------------------------
# 3.5 ä¸‹æ¸¸èƒŒå‹é…ç½®
# ----------------------------------------------------------------------------
backpressure:
  mysql:
    enabled: true
    max_inflight: 200
    timeout_ms: 2000
  mongo:
    enabled: true
    max_inflight: 200
    timeout_ms: 2000
  iam:
    enabled: true
    max_inflight: 100
    timeout_ms: 2000

# ----------------------------------------------------------------------------
# 3.6 MongoDB æ•°æ®åº“é…ç½®
# ----------------------------------------------------------------------------
# æ”¯æŒä¸¤ç§æ–¹å¼ï¼š
# 1. åˆ†ç¦»å‚æ•°ï¼ˆæ¨èï¼Œä¾¿äºé€šè¿‡ç¯å¢ƒå˜é‡è¦†ç›–ï¼‰
# 2. ç›´æ¥ URLï¼ˆå¦‚æœè®¾ç½®äº† urlï¼Œåˆ™å¿½ç•¥åˆ†ç¦»å‚æ•°ï¼‰
mongodb:
  host: "127.0.0.1:27017"
  username: "app_user"
  password: ""
  database: "qs"
  # url: ""  # å¯é€‰ï¼Œå¦‚æœè®¾ç½®åˆ™ä¼˜å…ˆä½¿ç”¨
  use-ssl: false
  ssl-insecure-skip-verify: false
  ssl-allow-invalid-hostnames: false
  ssl-ca-file: ""
  ssl-pem-keyfile: ""
  # MongoDB æ—¥å¿—é…ç½®
  enable-logger: true             # å¯ç”¨ MongoDB å‘½ä»¤æ—¥å¿—
  slow-threshold: 500ms           # æ…¢æŸ¥è¯¢é˜ˆå€¼ï¼ˆç”Ÿäº§ç¯å¢ƒå»ºè®®è°ƒé«˜ï¼‰
  
  # è¯¦ç»†æ—¥å¿—é…ç½®ï¼ˆcomponent-base v0.4.1+ å·²æ”¯æŒï¼ŒæŸ¥è¯¢è¯¦æƒ…ä¼šè‡ªåŠ¨è„±æ•ï¼‰
  # ç”Ÿäº§ç¯å¢ƒå¯ä»¥é€‚åº¦å¯ç”¨ log-command-detail ç”¨äºé—®é¢˜æ’æŸ¥ï¼Œæ€§èƒ½å½±å“å¾ˆå°
  log-command-detail: true        # è®°å½•æŸ¥è¯¢è¯¦æƒ…ï¼ˆç”¨äºæ…¢æŸ¥è¯¢åˆ†æå’Œé—®é¢˜æ’æŸ¥ï¼‰
  log-reply-detail: false         # ç”Ÿäº§ç¯å¢ƒç¦ç”¨å“åº”è¯¦æƒ…ï¼ˆé¿å…æ—¥å¿—è¿‡å¤§ï¼‰
  log-started: false              # ç”Ÿäº§ç¯å¢ƒç¦ç”¨å‘½ä»¤å¼€å§‹æ—¥å¿—ï¼ˆå‡å°‘æ—¥å¿—é‡ï¼‰

# ----------------------------------------------------------------------------
# 3.7 æ¶ˆæ¯é˜Ÿåˆ—é…ç½®
# ----------------------------------------------------------------------------
messaging:
  enabled: true                     # å¯ç”¨æ¶ˆæ¯é˜Ÿåˆ—å‘å¸ƒ
  provider: nsq                     # æ¶ˆæ¯é˜Ÿåˆ—ç±»å‹ï¼šnsq æˆ– rabbitmq
  
  # NSQ é…ç½®ï¼ˆç”Ÿäº§ç¯å¢ƒä½¿ç”¨ Docker æœåŠ¡åæˆ–å®é™…åœ°å€ï¼‰
  nsq-addr: "nsqd:4150"             # NSQ ç”Ÿäº§è€…åœ°å€ï¼ˆDocker ç½‘ç»œå†…éƒ¨ï¼‰
  nsq-lookupd-addr: "nsqlookupd:4161"  # NSQ Lookupd åœ°å€ï¼ˆç”¨äºæœåŠ¡å‘ç°ï¼‰

# ============================================================================
# 4. å¤–éƒ¨æœåŠ¡é›†æˆé…ç½®
# ============================================================================

# ----------------------------------------------------------------------------
# 4.1 IAM é›†æˆé…ç½®
# ----------------------------------------------------------------------------
iam:
  # åŠŸèƒ½å¼€å…³ï¼ˆç°åº¦å‘å¸ƒæ§åˆ¶ï¼‰
  enabled: true                   # æ˜¯å¦å¯ç”¨ IAM é›†æˆï¼ˆç”Ÿäº§ç¯å¢ƒå¼€å¯ï¼‰
  grpc-enabled: true              # æ˜¯å¦å¯ç”¨ gRPC è°ƒç”¨
  jwks-enabled: true              # æ˜¯å¦å¯ç”¨ JWKS æœ¬åœ°éªŒç­¾
  
  # å¯è§‚æµ‹æ€§é…ç½®
  enable-tracing: true            # å¯ç”¨ OpenTelemetry é“¾è·¯è¿½è¸ª
  enable-metrics: true            # å¯ç”¨ Prometheus æŒ‡æ ‡
  
  # gRPC è¿æ¥é…ç½®
  grpc:
    address: "iam-apiserver:9090"  # IAM gRPC æœåŠ¡åœ°å€ï¼ˆDocker å®¹å™¨ï¼Œç«¯å£ 9090ï¼‰
    timeout: 5s                   # è¯·æ±‚è¶…æ—¶æ—¶é—´
    retry-max: 3                  # æœ€å¤§é‡è¯•æ¬¡æ•°
    
    # mTLS è¯ä¹¦é…ç½®ï¼ˆå®¿ä¸»æœº /data/infra/ssl/grpc â†’ å®¹å™¨ /etc/qs-server/sslï¼‰
    tls:
      enabled: true               # å¯ç”¨ mTLS åŒå‘è®¤è¯ï¼ˆåŒ¹é… IAM 9090 ç«¯å£ï¼‰
      ca-file: "/etc/qs-server/ssl/grpc/ca/ca-chain.crt"           # CA è¯ä¹¦é“¾
      cert-file: "/etc/qs-server/ssl/grpc/server/qs-apiserver.crt" # QS å®¢æˆ·ç«¯è¯ä¹¦
      key-file: "/etc/qs-server/ssl/grpc/server/qs-apiserver.key"  # QS å®¢æˆ·ç«¯ç§é’¥
  
  # JWT éªŒè¯é…ç½®
  jwt:
    issuer: "https://iam-apiserver:9444"              # Token ç­¾å‘è€…ï¼ˆHTTPS ç«¯å£ 9444ï¼‰
    audience: ["qs"]                                   # å…è®¸çš„å—ä¼—ï¼ˆQS æœåŠ¡æ ‡è¯†ï¼‰
    algorithms: ["RS256", "ES256"]                     # æ”¯æŒçš„ç­¾åç®—æ³•
    clock-skew: 60s                                    # æ—¶é’Ÿåç§»å®¹å¿åº¦
    required-claims: ["user_id", "tenant_id"]          # å¿…éœ€çš„ Claims
  
  # JWKS é…ç½®ï¼ˆJWT å…¬é’¥ç®¡ç†ï¼‰
  jwks:
    url: "https://iam.yangshujie.com/api/v1/.well-known/jwks.json"  # JWKS HTTP ç«¯ç‚¹
    grpc-endpoint: "iam-apiserver:9090"                    # gRPC é™çº§ç«¯ç‚¹ï¼ˆHTTP å¤±è´¥æ—¶ä½¿ç”¨ï¼Œç«¯å£ 9090ï¼‰
    refresh-interval: 5m                               # å®šæ—¶åˆ·æ–°é—´éš”
    cache-ttl: 30m                                     # ç¼“å­˜æœ‰æ•ˆæœŸ
    fetch-strategies: ["http", "grpc", "cache"]        # é™çº§ç­–ç•¥ï¼šHTTP â†’ gRPC â†’ ç¼“å­˜

  # ç”¨æˆ·ä¿¡æ¯ç¼“å­˜é…ç½®
    ttl: 10m                                           # ç¼“å­˜æ—¶é•¿ï¼ˆç›‘æŠ¤å…³ç³»å˜åŒ–è¾ƒå°‘ï¼‰
    max-size: 50000                                    # æœ€å¤§ç¼“å­˜æ¡ç›®æ•°

  # ç”¨æˆ·ä¿¡æ¯ç¼“å­˜é…ç½®
  user-cache:
    enabled: true                                      # å¯ç”¨ç”¨æˆ·ä¿¡æ¯ç¼“å­˜
    ttl: 5m                                            # ç¼“å­˜æ—¶é•¿
    max-size: 10000                                    # æœ€å¤§ç¼“å­˜æ¡ç›®æ•°
  
  # ç›‘æŠ¤å…³ç³»ç¼“å­˜é…ç½®
  guardianship-cache:
    enabled: true                                      # å¯ç”¨ç›‘æŠ¤å…³ç³»ç¼“å­˜
    ttl: 10m                                           # ç¼“å­˜æ—¶é•¿ï¼ˆç›‘æŠ¤å…³ç³»å˜åŒ–è¾ƒå°‘ï¼‰
    max-size: 50000                                    # æœ€å¤§ç¼“å­˜æ¡ç›®æ•°

# ----------------------------------------------------------------------------
# 4.2 å¾®ä¿¡å°ç¨‹åºé…ç½®
# ----------------------------------------------------------------------------
wechat:
  # IAM ä¸­çš„ wechatappIdï¼Œç”¨äºæŸ¥è¯¢å¾®ä¿¡åº”ç”¨ä¿¡æ¯ï¼ˆAppIDã€AppSecret ç­‰ï¼‰
  wechat-app-id: "wx72ade250b619a649"
  
  # å°ç¨‹åºé¡µé¢è·¯å¾„ï¼Œä¾‹å¦‚ "pages/home/index"
  page-path: "pages/questionnaire/fill/index"
  
  # é™çº§é…ç½®ï¼ˆå¦‚æœ IAM æœªå¯ç”¨æ—¶ä½¿ç”¨ï¼Œå¯é€‰ï¼‰
  # app-id: ""      # å°ç¨‹åº AppIDï¼ˆç›´æ¥é…ç½®ï¼‰
  # app-secret: ""  # å°ç¨‹åº AppSecretï¼ˆç›´æ¥é…ç½®ï¼‰

# ============================================================================
# 5. ç³»ç»Ÿè¿è¡Œé…ç½®
# ============================================================================

# ----------------------------------------------------------------------------
# 5.1 æ—¥å¿—é…ç½®ï¼ˆç”Ÿäº§ç¯å¢ƒ - ä½¿ç”¨ component-base duplicate æ¨¡å¼ï¼‰
# ----------------------------------------------------------------------------
log:
  level: info                   # æ—¥å¿—åŸºæœ¬çº§åˆ«ï¼šdebug, info, warn, error, fatal, panic
  format: json               # æ—¥å¿—æ ¼å¼ï¼ˆjson é€‚åˆç”Ÿäº§ç¯å¢ƒï¼Œconsole é€‚åˆå¼€å‘ç¯å¢ƒï¼‰
  enable-color: false            # æ–‡ä»¶è¾“å‡ºå¯ç”¨é¢œè‰²
  development: false            # ç”Ÿäº§æ¨¡å¼
  name: "qs-apiserver"          # æ—¥å¿—åç§°
  
  # ğŸ“Š æ—¥å¿—è½®è½¬é…ç½®
  max-size: 100                 # å•ä¸ªæ—¥å¿—æ–‡ä»¶æœ€å¤§ 100MB
  max-age: 30                   # ä¿ç•™ 30 å¤©
  max-backups: 10               # ä¿ç•™ 10 ä¸ªå¤‡ä»½æ–‡ä»¶
  compress: true                # å‹ç¼©æ—§æ–‡ä»¶èŠ‚çœç©ºé—´
  
  # â° æŒ‰æ—¶é—´è½®è½¬ï¼ˆæ¨èç”Ÿäº§ç¯å¢ƒä½¿ç”¨ï¼‰
  enable-time-rotation: true    # å¯ç”¨æŒ‰å¤©è½®è½¬
  time-rotation-format: "2006-01-02"  # æŒ‰å¤©è½®è½¬
  
  # ğŸ¯ åˆ†çº§è¾“å‡ºï¼ˆduplicate æ¨¡å¼ - ç”Ÿäº§ç¯å¢ƒæ¨èï¼‰
  enable-level-output: true       # å¯ç”¨åˆ†çº§è¾“å‡º
  level-output-mode: "duplicate"  # é‡å¤è¾“å‡ºæ¨¡å¼ï¼ˆæ¨èï¼‰
  level-output-paths:
    all:
      - stdout                              # å®¹å™¨/è¿›ç¨‹æ ‡å‡†è¾“å‡ºä¿ç•™å®Œæ•´æ—¥å¿—
      - /data/logs/qs/qs-apiserver.log      # å®Œæ•´æ—¥å¿—ï¼ˆæ‰€æœ‰çº§åˆ«ï¼‰
    error:
      - stderr                              # ERROR çº§åˆ«å†™å…¥æ ‡å‡†é”™è¯¯ï¼Œä¾¿äºç›‘æ§é‡‡é›†
      - /data/logs/qs/qs-apiserver-error.log # é¢å¤–è®°å½• ERRORï¼ˆå¿«é€Ÿå®šä½æ•…éšœï¼‰

# ----------------------------------------------------------------------------
# 5.2 JWT é…ç½®ï¼ˆå·²åºŸå¼ƒï¼Œä½¿ç”¨ IAM ç»Ÿä¸€è®¤è¯ï¼‰
# ----------------------------------------------------------------------------
jwt:
  realm: "qs jwt"
  key: "change-me"
  timeout: "24h"
  max-refresh: "168h"
