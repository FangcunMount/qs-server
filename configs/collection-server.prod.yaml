# collection-server 生产环境配置

# 服务器配置（HTTP）
insecure:
  bind-address: "0.0.0.0"
  bind-port: 8080

# 安全服务配置（HTTPS）
secure:
  bind-address: "0.0.0.0"
  bind-port: 8443
  tls:
    cert-file: "./configs/cert/collection-server.crt"
    private-key-file: "./configs/cert/collection-server.key"

# GRPC 客户端配置
grpc_client:
  endpoint: "apiserver:9090"  # 生产部署请根据服务发现或网关调整
  timeout: 30
  insecure: true

# JWT 配置
jwt:
  secret_key: "<YOUR_COLLECTION_JWT_SECRET_KEY>"
  token_duration: 168  # 7 天 (24*7小时)

# 日志配置
log:
  name: "collection-server"
  level: "info"
  format: "json"
  enable-color: false
  disable-caller: true
  disable-stacktrace: true
  development: false
  output-paths: ["/data/logs/qs/collection-server.log", "stdout"]
  error-output-paths: ["/data/logs/qs/collection-server-error.log", "stderr"]
  max-size: 100
  max-age: 30
  max-backups: 10
  compress: true

# Redis 配置
redis:
  # Cache Redis - 用于缓存、会话、限流等临时数据
  cache:
    host: ${REDIS_CACHE_HOST}
    port: ${REDIS_CACHE_PORT}
    username: ${REDIS_CACHE_USER}
    password: ${REDIS_CACHE_PASSWORD}
    database: ${REDIS_CACHE_DB}
    max-idle: ${REDIS_CACHE_MAX_IDLE}
    max-active: ${REDIS_CACHE_MAX_ACTIVE}
    timeout: ${REDIS_CACHE_TIMEOUT}
    enable-cluster: ${REDIS_CACHE_ENABLE_CLUSTER}
    use-ssl: ${REDIS_CACHE_USE_SSL}
    enable-logging: ${REDIS_CACHE_ENABLE_LOGGING}

  # Store Redis - 用于持久化存储、队列、发布订阅等
  store:
    host: ${REDIS_STORE_HOST}
    port: ${REDIS_STORE_PORT}
    username: ${REDIS_STORE_USER}
    password: ${REDIS_STORE_PASSWORD}
    database: ${REDIS_STORE_DB}
    max-idle: ${REDIS_STORE_MAX_IDLE}
    max-active: ${REDIS_STORE_MAX_ACTIVE}
    timeout: ${REDIS_STORE_TIMEOUT}
    enable-cluster: ${REDIS_STORE_ENABLE_CLUSTER}
    use-ssl: ${REDIS_STORE_USE_SSL}
    enable-logging: ${REDIS_STORE_ENABLE_LOGGING}
