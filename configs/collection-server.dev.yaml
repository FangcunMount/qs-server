# Collection Server 配置文件

# 服务器配置
insecure:
  bind-address: "127.0.0.1"
  bind-port: 18083

# 安全服务配置
secure:
  bind-address: "127.0.0.1"
  bind-port: 18443
  tls:
    cert-file: "./configs/cert/collection-server.crt"
    private-key-file: "./configs/cert/collection-server.key"

# GRPC 客户端配置
grpc_client:
  endpoint: "127.0.0.1:9090"
  timeout: 30
  insecure: true

# JWT 配置
jwt:
  secret_key: "qs-collection-server-jwt-secret-key-2024"
  token_duration: 168  # 7 天 (24*7小时)

# 日志配置
log:
  name: "collection-server"
  level: "debug" # 日志级别：debug, info, warn, error, fatal, panic
  format: "console" # 日志格式：console, json
  enable-color: true # 是否开启颜色
  disable-caller: false # 是否禁用调用者
  disable-stacktrace: false # 是否禁用堆栈跟踪
  development: false # 是否为开发环境
  output-paths: ["/data/logs/qs/collection-server.log", "stdout"] # 输出路径
  error-output-paths: ["/data/logs/qs/collection-server-error.log", "stderr"] # 错误输出路径
  max-size: 100 # 单个日志文件最大大小（MB）
  max-age: 30 # 保留旧日志文件的最大天数
  max-backups: 10 # 保留旧日志文件的最大个数
  compress: true # 是否压缩旧日志文件

# Redis 配置（双实例架构）
redis:
  # Cache Redis - 用于缓存、会话、限流等临时数据
  cache:
    host: "127.0.0.1"
    port: 6379
    username: "app"  # Redis 6.0+ ACL 用户名
    password: "dev_app_123"
    database: 0  # 缓存使用 DB 0
    max-idle: 50
    max-active: 100
    timeout: 5
    enable-cluster: false
    use-ssl: false
    enable-logging: true  # 开启 Redis 命令日志（用于调试，生产环境建议关闭）
  
  # Store Redis - 用于持久化存储、队列、发布订阅等
  store:
    host: "127.0.0.1"
    port: 6380  # 使用 Store Redis 实例（端口 6380）
    username: "app"  # Redis 6.0+ ACL 用户名
    password: "dev_app_123"
    database: 0  # Store Redis 使用 DB 0
    max-idle: 50
    max-active: 100
    timeout: 5
    enable-cluster: false
    use-ssl: false
    enable-logging: true  # 开启 Redis 命令日志（用于调试，生产环境建议关闭）