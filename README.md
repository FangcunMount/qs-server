# qs-server

> é—®å·é‡è¡¨æµ‹è¯„ç³»ç»Ÿ - åŸºäº DDD å’Œå…­è¾¹å½¢æ¶æ„çš„ä¼ä¸šçº§è§£å†³æ–¹æ¡ˆ

[![Go Version](https://img.shields.io/badge/Go-1.21+-00ADD8?style=flat&logo=go)](https://go.dev/)
[![License](https://img.shields.io/badge/License-MIT-blue.svg)](LICENSE)

## ğŸ¯ ç³»ç»Ÿæ¦‚è¿°

**qs-server** æ˜¯ä¸€ä¸ªä¸“ä¸šçš„é—®å·é‡è¡¨æµ‹è¯„ç³»ç»Ÿï¼Œæ”¯æŒé—®å·æ”¶é›†ã€åŒ»å­¦/å¿ƒç†é‡è¡¨æµ‹è¯„ã€æ™ºèƒ½è®¡åˆ†å’Œè§£è¯»æŠ¥å‘Šç”Ÿæˆã€‚

### æ ¸å¿ƒæœåŠ¡

| æœåŠ¡ | èŒè´£ | ç«¯å£ (dev) |
|-----|------|-----------|
| **qs-apiserver** | æ ¸å¿ƒ API æœåŠ¡ï¼ˆé—®å·ã€é‡è¡¨ã€è¯„ä¼°ã€ç”¨æˆ·ç®¡ç†ï¼‰ | 18082 |
| **qs-worker** | åå°äº‹ä»¶å¤„ç†ï¼ˆå¼‚æ­¥è¯„ä¼°ã€æŠ¥å‘Šç”Ÿæˆï¼‰ | - |
| **collection-server** | è½»é‡çº§æ•°æ®æ”¶é›†ï¼ˆå°ç¨‹åºç«¯ï¼‰ | 18083 |

### æŠ€æœ¯æ ˆ

- **è¯­è¨€**: Go 1.21+
- **æ¶æ„**: DDD + å…­è¾¹å½¢æ¶æ„ + äº‹ä»¶é©±åŠ¨
- **å­˜å‚¨**: MySQL (ä¸šåŠ¡) + MongoDB (å†…å®¹) + Redis (ç¼“å­˜/é˜Ÿåˆ—)
- **API**: RESTful + gRPC

## ğŸš€ å¿«é€Ÿå¼€å§‹

### ç¯å¢ƒè¦æ±‚

- Go 1.21+
- MySQL 8.0+
- MongoDB 6.0+
- Redis 7.0+ (åŒå®ä¾‹: Cache 6379, Store 6380)

### å¯åŠ¨æœåŠ¡

```bash
# å…‹éš†é¡¹ç›®
git clone https://github.com/FangcunMountain/qs-server.git
cd qs-server

# æ£€æŸ¥åŸºç¡€è®¾æ–½
make check-infra

# ç¼–è¯‘å¹¶å¯åŠ¨
make build
make run-apiserver      # API Server
make run-worker         # Worker
make run-collection     # Collection Server

# æˆ–å¯åŠ¨å…¨éƒ¨
make run-all
```

### å¼€å‘æ¨¡å¼ï¼ˆçƒ­é‡è½½ï¼‰

```bash
make dev-apiserver
make dev-worker
make dev-collection
```

### éªŒè¯æœåŠ¡

```bash
curl http://localhost:18082/healthz   # API Server
curl http://localhost:18083/healthz   # Collection Server
```

## ğŸ“ é¡¹ç›®ç»“æ„

```text
qs-server/
â”œâ”€â”€ cmd/                          # æœåŠ¡å…¥å£
â”‚   â”œâ”€â”€ qs-apiserver/
â”‚   â”œâ”€â”€ qs-worker/
â”‚   â””â”€â”€ collection-server/
â”œâ”€â”€ internal/                     # å†…éƒ¨å®ç°
â”‚   â”œâ”€â”€ apiserver/
â”‚   â”‚   â”œâ”€â”€ domain/              # é¢†åŸŸå±‚ (DDD æ ¸å¿ƒ)
â”‚   â”‚   â”œâ”€â”€ application/         # åº”ç”¨æœåŠ¡å±‚
â”‚   â”‚   â”œâ”€â”€ infra/               # åŸºç¡€è®¾æ–½å±‚
â”‚   â”‚   â””â”€â”€ interface/           # æ¥å£å±‚ (REST/gRPC)
â”‚   â”œâ”€â”€ worker/
â”‚   â””â”€â”€ collection-server/
â”œâ”€â”€ pkg/                          # å…¬å…±åŒ…
â”œâ”€â”€ configs/                      # é…ç½®æ–‡ä»¶
â”œâ”€â”€ docs/                         # è®¾è®¡æ–‡æ¡£
â””â”€â”€ build/docker/                 # Docker é…ç½®
```

## ğŸ“š æ–‡æ¡£å¯¼èˆª

è¯¦ç»†è®¾è®¡æ–‡æ¡£ä½äº [`docs/`](./docs/) ç›®å½•ï¼š

| ç›®å½• | å†…å®¹ |
|-----|------|
| [00-æ¦‚è§ˆ](./docs/00-æ¦‚è§ˆ/) | ç³»ç»Ÿæ¶æ„ã€ä»£ç ç»“æ„ |
| [01-surveyåŸŸ](./docs/01-surveyåŸŸ/) | é—®å·å­åŸŸè®¾è®¡ |
| [02-scaleåŸŸ](./docs/02-scaleåŸŸ/) | é‡è¡¨å­åŸŸè®¾è®¡ |
| [03-evaluationåŸŸ](./docs/03-evaluationåŸŸ/) | è¯„ä¼°å­åŸŸè®¾è®¡ |
| [04-actoråŸŸ](./docs/04-actoråŸŸ/) | ç”¨æˆ·æ¨¡å‹è®¾è®¡ |
| [05-planåŸŸ](./docs/05-planåŸŸ/) | æµ‹è¯„è®¡åˆ’è®¾è®¡ |
| [06-screeningåŸŸ](./docs/06-screeningåŸŸ/) | å…¥æ ¡ç­›æŸ¥è®¾è®¡ |
| [07-åŸºç¡€è®¾æ–½](./docs/07-åŸºç¡€è®¾æ–½/) | é«˜å¹¶å‘æ¶æ„ |
| [08-è¿ç»´éƒ¨ç½²](./docs/08-è¿ç»´éƒ¨ç½²/) | ç«¯å£é…ç½® |

## ğŸ”§ å¸¸ç”¨å‘½ä»¤

```bash
# æ„å»º
make build              # ç¼–è¯‘æ‰€æœ‰æœåŠ¡
make build-apiserver    # ç¼–è¯‘ API Server

# è¿è¡Œ
make run-all            # å¯åŠ¨æ‰€æœ‰æœåŠ¡
make stop-all           # åœæ­¢æ‰€æœ‰æœåŠ¡
make status-all         # æŸ¥çœ‹æœåŠ¡çŠ¶æ€

# å¼€å‘
make dev-apiserver      # çƒ­é‡è½½å¼€å‘
make test               # è¿è¡Œæµ‹è¯•
make lint               # ä»£ç æ£€æŸ¥

# åŸºç¡€è®¾æ–½
make check-infra        # æ£€æŸ¥ä¾èµ–æœåŠ¡
make check-mysql
make check-redis
make check-mongodb
```

## ğŸ—ï¸ æ¶æ„æ¦‚è§ˆ

```text
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      Interface Layer                        â”‚
â”‚              REST API / gRPC / WebSocket                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    Application Layer                        â”‚
â”‚                 DTO / Service / Mapper                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      Domain Layer                           â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ Survey  â”‚ â”‚  Scale  â”‚ â”‚ Evaluation â”‚ â”‚ Actor/Plan/   â”‚  â”‚
â”‚  â”‚  åŸŸ     â”‚ â”‚   åŸŸ    â”‚ â”‚    åŸŸ      â”‚ â”‚ Screening     â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                   Infrastructure Layer                      â”‚
â”‚              MySQL / MongoDB / Redis / MQ                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ“ å¼€å‘è§„èŒƒ

### æäº¤æ ¼å¼

```text
<type>(<scope>): <subject>

feat(survey): æ·»åŠ é—®å·ç‰ˆæœ¬ç®¡ç†
fix(evaluation): ä¿®å¤è®¡åˆ†ç®—æ³•
docs(readme): æ›´æ–°å¿«é€Ÿå¼€å§‹æŒ‡å—
```

### ä»£ç æ£€æŸ¥

```bash
make lint       # golangci-lint
make test       # å•å…ƒæµ‹è¯•
make coverage   # æµ‹è¯•è¦†ç›–ç‡
```

## ğŸ“„ License

MIT License - see [LICENSE](LICENSE) for details.

---

**[ğŸ“– æŸ¥çœ‹å®Œæ•´æ–‡æ¡£](./docs/README.md)** | **[ğŸ› é—®é¢˜åé¦ˆ](https://github.com/FangcunMountain/qs-server/issues)**
