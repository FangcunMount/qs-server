# 11-04-01 Survey å­åŸŸæ¶æ„æ€»è§ˆ

> **ç‰ˆæœ¬**ï¼šV3.0  
> **æœ€åæ›´æ–°**ï¼š2025-11-26  
> **çŠ¶æ€**ï¼šâœ… å·²å®ç°å¹¶éªŒè¯  
> **æ‰€å±ç³»åˆ—**ï¼š[Survey å­åŸŸè®¾è®¡ç³»åˆ—](./11-04-Surveyå­åŸŸè®¾è®¡ç³»åˆ—.md)

---

## 1. Survey å­åŸŸçš„å®šä½ä¸èŒè´£

### 1.1 å­åŸŸåœ¨ä¸šåŠ¡ä¸Šä¸‹æ–‡ä¸­çš„ä½ç½®

Survey å­åŸŸæ˜¯**é—®å·&é‡è¡¨ BCï¼ˆBounded Contextï¼‰**çš„æ ¸å¿ƒå­åŸŸä¹‹ä¸€ï¼Œä¸“æ³¨äºé—®å·çš„**ç»“æ„å®šä¹‰**å’Œ**ç­”æ¡ˆæ”¶é›†**ã€‚

**ä¸šåŠ¡ä»·å€¼**ï¼š

* ğŸ“‹ æä¾›çµæ´»å¯æ‰©å±•çš„é—®å·æ¨¡æ¿ç®¡ç†
* âœï¸ æ”¯æŒå¤šç§é¢˜å‹çš„ç­”æ¡ˆæ”¶é›†
* âœ… ç¡®ä¿ç­”æ¡ˆæ•°æ®çš„å®Œæ•´æ€§å’Œåˆæ³•æ€§

**åœ¨ä¸šåŠ¡æµç¨‹ä¸­çš„ä½ç½®**ï¼š

```text
æµ‹è¯„æµç¨‹ï¼š
1. [Survey] å®šä¹‰é—®å·ç»“æ„ï¼ˆé¢˜ç›®ã€é€‰é¡¹ã€æ ¡éªŒè§„åˆ™ï¼‰
2. [Survey] æ”¶é›†ç”¨æˆ·ç­”æ¡ˆ
3. [Survey] æ ¡éªŒç­”æ¡ˆåˆæ³•æ€§
4. [Scale] æ ¹æ®é—®å·å’Œç­”æ¡ˆè¿›è¡Œè®¡åˆ†  â† Survey ä¸º Scale æä¾›æ•°æ®
5. [Scale] ç”Ÿæˆè§£è¯»æŠ¥å‘Š
6. [Assessment] ç®¡ç†æ•´ä¸ªæµ‹è¯„è¿‡ç¨‹    â† Survey è¢« Assessment å¼•ç”¨
```

### 1.2 å­åŸŸèŒè´£è¾¹ç•Œ

#### âœ… Survey å…³å¿ƒä»€ä¹ˆ

| èŒè´£é¢†åŸŸ | å…·ä½“å†…å®¹ | å®ç°æ–¹å¼ |
|---------|---------|---------|
| **é—®å·ç»“æ„** | é¢˜ç›®ã€é€‰é¡¹ã€é¢˜å‹ã€é¡ºåº | Questionnaire èšåˆ |
| **ç­”æ¡ˆæ”¶é›†** | è®°å½•ç­”æ¡ˆã€ç®¡ç†ç­”å·çŠ¶æ€ | AnswerSheet èšåˆ |
| **è¾“å…¥æ ¡éªŒ** | å¿…å¡«ã€é•¿åº¦ã€èŒƒå›´ã€æ ¼å¼ | Validation å­åŸŸ |
| **ç‰ˆæœ¬ç®¡ç†** | é—®å·ç‰ˆæœ¬æ¼”åŒ–ã€è‰ç¨¿å‘å¸ƒ | Versioning é¢†åŸŸæœåŠ¡ |

#### âŒ Survey ä¸å…³å¿ƒä»€ä¹ˆ

| éèŒè´£é¢†åŸŸ | è¯´æ˜ | è´Ÿè´£å­åŸŸ |
|-----------|------|---------|
| **åˆ†æ•°å«ä¹‰** | åˆ†æ•°ä»£è¡¨ä»€ä¹ˆå¿ƒç†çŠ¶æ€ | Scale å­åŸŸ |
| **è®¡åˆ†é€»è¾‘** | å¦‚ä½•æ ¹æ®ç­”æ¡ˆè®¡ç®—åˆ†æ•° | Scale å­åŸŸ |
| **è§£è¯»è§„åˆ™** | åˆ†æ•°å¯¹åº”çš„è§£è¯»æ–‡æœ¬ | Scale å­åŸŸ |
| **æµ‹è¯„ç®¡ç†** | æµ‹è¯„è®¡åˆ’ã€æµ‹è¯„è®°å½• | Assessment å­åŸŸ |
| **ç”¨æˆ·ç®¡ç†** | æ‚£è€…ä¿¡æ¯ã€åŒ»ç”Ÿä¿¡æ¯ | Actor å­åŸŸ |

**å…³é”®ç†è§£**ï¼š

> Survey æ˜¯ä¸€ä¸ª**çº¯ç²¹çš„æ•°æ®ç»“æ„é¢†åŸŸ**ï¼Œå®ƒåªå®šä¹‰"æ€ä¹ˆé—®"å’Œ"æ€ä¹ˆç­”"ï¼Œä¸å…³å¿ƒ"ç­”æ¡ˆæ„å‘³ç€ä»€ä¹ˆ"ã€‚è¿™ç§èŒè´£åˆ†ç¦»ä½¿å¾—ï¼š
>
> 1. Survey å¯ä»¥ç‹¬ç«‹æ¼”åŒ–ï¼Œä¸å—ä¸šåŠ¡è§„åˆ™å˜æ›´å½±å“
> 2. åŒä¸€ä»½é—®å·å¯ä»¥è¢«ä¸åŒçš„é‡è¡¨ä½¿ç”¨ï¼ˆä¸€å¯¹å¤šå…³ç³»ï¼‰
> 3. ç³»ç»Ÿå…·æœ‰æ›´å¥½çš„å¯æµ‹è¯•æ€§å’Œå¯ç»´æŠ¤æ€§

### 1.3 ä¸å…¶ä»–å­åŸŸçš„ä¾èµ–å…³ç³»

```text
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚            Assessment å­åŸŸ                   â”‚
â”‚     (æµ‹è¯„è®¡åˆ’ã€æµ‹è¯„è®°å½•ã€æµ‹è¯„ç®¡ç†)            â”‚
â”‚                                             â”‚
â”‚   å¼•ç”¨: QuestionnaireCode, AnswerSheetID    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                   â”‚ ä¾èµ– (è¯»å–)
                   â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              Scale å­åŸŸ                      â”‚
â”‚      (è®¡åˆ†è§„åˆ™ã€è§£è¯»è§„åˆ™ã€åˆ†æ•°è®¡ç®—)           â”‚
â”‚                                             â”‚
â”‚   è¯»å–: Question, Answer çš„åªè¯»è§†å›¾          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                   â”‚ ä¾èµ– (è¯»å–)
                   â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚            Survey å­åŸŸ (æœ¬æ–‡æ¡£)               â”‚
â”‚     (é—®å·ç»“æ„ã€ç­”æ¡ˆæ”¶é›†ã€è¾“å…¥æ ¡éªŒ)            â”‚
â”‚                                             â”‚
â”‚   âœ¨ ç‹¬ç«‹å­˜åœ¨ï¼Œæ— å¤–éƒ¨ä¾èµ–                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**ä¾èµ–æ–¹å‘ç‰¹ç‚¹**ï¼š

* âœ… Survey **ä¸ä¾èµ–**ä»»ä½•å…¶ä»–å­åŸŸ â†’ æœ€åº•å±‚ã€æœ€ç¨³å®š
* âœ… Scale **å•å‘ä¾èµ–** Survey çš„åªè¯»è§†å›¾ â†’ è¯»å– Question å’Œ Answer
* âœ… Assessment **å•å‘ä¾èµ–** Survey å’Œ Scale â†’ å¼•ç”¨ ID å’Œç»“æœ

---

## 2. æ ¸å¿ƒèšåˆä¸é¢†åŸŸæ¨¡å‹

### 2.1 èšåˆåˆ’åˆ†

Survey å­åŸŸåŒ…å« **3 ä¸ªæ ¸å¿ƒç»„ä»¶**ï¼š

#### 1ï¸âƒ£ Questionnaire èšåˆï¼ˆé—®å·æ¨¡æ¿ï¼‰

**èšåˆæ ¹**ï¼š`Questionnaire`

**æ ¸å¿ƒå®ä½“/å€¼å¯¹è±¡**ï¼š

* `Question` - é¢˜ç›®ï¼ˆæ¥å£ï¼‰
* `Option` - é€‰é¡¹ï¼ˆå€¼å¯¹è±¡ï¼‰
* `ValidationRule` - æ ¡éªŒè§„åˆ™ï¼ˆå€¼å¯¹è±¡ï¼‰
* `Version` - ç‰ˆæœ¬ï¼ˆå€¼å¯¹è±¡ï¼‰

**èŒè´£**ï¼š

* ç®¡ç†é—®å·çš„ç”Ÿå‘½å‘¨æœŸï¼ˆè‰ç¨¿ â†’ å‘å¸ƒ â†’ å½’æ¡£ï¼‰
* ç®¡ç†é¢˜ç›®åˆ—è¡¨ï¼ˆå¢åˆ æ”¹æŸ¥ï¼‰
* ç»´æŠ¤é—®å·ç‰ˆæœ¬
* ç¡®ä¿é—®å·å‘å¸ƒå‰çš„å®Œæ•´æ€§

#### 2ï¸âƒ£ AnswerSheet èšåˆï¼ˆç­”å·å®ä¾‹ï¼‰

**èšåˆæ ¹**ï¼š`AnswerSheet`

**æ ¸å¿ƒå®ä½“/å€¼å¯¹è±¡**ï¼š

* `Answer` - ç­”æ¡ˆï¼ˆå®ä½“ï¼‰
* `AnswerValue` - ç­”æ¡ˆå€¼ï¼ˆæ¥å£ï¼‰
* `StringValue/NumberValue/OptionValue/OptionsValue` - å…·ä½“ç­”æ¡ˆå€¼

**èŒè´£**ï¼š

* æ”¶é›†ç”¨æˆ·ç­”æ¡ˆ
* ç®¡ç†ç­”å·çŠ¶æ€ï¼ˆè‰ç¨¿ â†’ å·²æäº¤ï¼‰
* å…³è”é—®å·å’Œå¡«å†™äºº
* æä¾›ç­”æ¡ˆæŸ¥è¯¢

#### 3ï¸âƒ£ Validation å­åŸŸï¼ˆæ ¡éªŒè§„åˆ™ï¼‰

**æ ¸å¿ƒç»„ä»¶**ï¼š

* `ValidationRule` - æ ¡éªŒè§„åˆ™ï¼ˆå€¼å¯¹è±¡ï¼‰
* `ValidationStrategy` - æ ¡éªŒç­–ç•¥ï¼ˆæ¥å£ï¼‰
* `Validator` - éªŒè¯å™¨ï¼ˆé¢†åŸŸæœåŠ¡ï¼‰
* `ValidatableValue` - å¯æ ¡éªŒå€¼ï¼ˆæ¥å£ï¼‰

**èŒè´£**ï¼š

* å®šä¹‰æ ¡éªŒè§„åˆ™ç±»å‹
* å®ç°å„ç§æ ¡éªŒç­–ç•¥
* æ‰§è¡Œç­”æ¡ˆæ ¡éªŒ
* è¿”å›æ ¡éªŒç»“æœ

### 2.2 é¢†åŸŸæ¨¡å‹æ¦‚è§ˆ

```text
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    Questionnaire èšåˆ                       â”‚
â”‚                                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚
â”‚  â”‚  Questionnaire   â”‚â”€â”€â”€â”€>â”‚   Question (æ¥å£)        â”‚     â”‚
â”‚  â”‚   (èšåˆæ ¹)       â”‚     â”‚  - RadioQuestion        â”‚     â”‚
â”‚  â”‚                  â”‚     â”‚  - CheckboxQuestion     â”‚     â”‚
â”‚  â”‚  - code          â”‚     â”‚  - TextQuestion         â”‚     â”‚
â”‚  â”‚  - title         â”‚     â”‚  - NumberQuestion       â”‚     â”‚
â”‚  â”‚  - version       â”‚     â”‚  - SectionQuestion      â”‚     â”‚
â”‚  â”‚  - status        â”‚     â”‚  - TextareaQuestion     â”‚     â”‚
â”‚  â”‚  - questions[]   â”‚     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜              â”‚                       â”‚
â”‚           â”‚                        â”‚                       â”‚
â”‚           â”‚                        v                       â”‚
â”‚           â”‚              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”             â”‚
â”‚           â”‚              â”‚     Option       â”‚             â”‚
â”‚           â”‚              â”‚   (å€¼å¯¹è±¡)       â”‚             â”‚
â”‚           â”‚              â”‚  - code          â”‚             â”‚
â”‚           â”‚              â”‚  - content       â”‚             â”‚
â”‚           â”‚              â”‚  - score         â”‚             â”‚
â”‚           â”‚              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜             â”‚
â”‚           â”‚                        â”‚                       â”‚
â”‚           v                        v                       â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”             â”‚
â”‚  â”‚     Version      â”‚   â”‚ ValidationRule   â”‚             â”‚
â”‚  â”‚   (å€¼å¯¹è±¡)       â”‚   â”‚   (å€¼å¯¹è±¡)       â”‚             â”‚
â”‚  â”‚  - 0.0.1         â”‚   â”‚  - ruleType      â”‚             â”‚
â”‚  â”‚  - 1.0.1         â”‚   â”‚  - targetValue   â”‚             â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    AnswerSheet èšåˆ                         â”‚
â”‚                                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚
â”‚  â”‚   AnswerSheet    â”‚â”€â”€â”€â”€>â”‚        Answer           â”‚     â”‚
â”‚  â”‚    (èšåˆæ ¹)      â”‚     â”‚       (å®ä½“)            â”‚     â”‚
â”‚  â”‚                  â”‚     â”‚                         â”‚     â”‚
â”‚  â”‚  - id            â”‚     â”‚  - questionCode         â”‚     â”‚
â”‚  â”‚  - questionnaireRef    â”‚  - questionType         â”‚     â”‚
â”‚  â”‚  - fillerRef     â”‚     â”‚  - value (AnswerValue)  â”‚     â”‚
â”‚  â”‚  - answers[]     â”‚     â”‚  - score                â”‚     â”‚
â”‚  â”‚  - status        â”‚     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜              â”‚                       â”‚
â”‚                                    v                       â”‚
â”‚                          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”             â”‚
â”‚                          â”‚  AnswerValue     â”‚             â”‚
â”‚                          â”‚    (æ¥å£)        â”‚             â”‚
â”‚                          â”‚                  â”‚             â”‚
â”‚                          â”‚  - StringValue   â”‚             â”‚
â”‚                          â”‚  - NumberValue   â”‚             â”‚
â”‚                          â”‚  - OptionValue   â”‚             â”‚
â”‚                          â”‚  - OptionsValue  â”‚             â”‚
â”‚                          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    Validation å­åŸŸ                          â”‚
â”‚                                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚
â”‚  â”‚    Validator     â”‚â”€â”€â”€â”€>â”‚ ValidationStrategy      â”‚     â”‚
â”‚  â”‚  (é¢†åŸŸæœåŠ¡)      â”‚     â”‚     (æ¥å£)              â”‚     â”‚
â”‚  â”‚                  â”‚     â”‚                         â”‚     â”‚
â”‚  â”‚  - ValidateValue â”‚     â”‚  - RequiredStrategy     â”‚     â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚  - MinLengthStrategy    â”‚     â”‚
â”‚           â”‚               â”‚  - MaxLengthStrategy    â”‚     â”‚
â”‚           â”‚               â”‚  - MinValueStrategy     â”‚     â”‚
â”‚           â”‚               â”‚  - MaxValueStrategy     â”‚     â”‚
â”‚           v               â”‚  - MinSelectionsStrategyâ”‚     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚  - MaxSelectionsStrategyâ”‚     â”‚
â”‚  â”‚ ValidatableValue â”‚     â”‚  - PatternStrategy      â”‚     â”‚
â”‚  â”‚    (æ¥å£)        â”‚     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚
â”‚  â”‚                  â”‚                                      â”‚
â”‚  â”‚  - IsEmpty()     â”‚                                      â”‚
â”‚  â”‚  - AsString()    â”‚                                      â”‚
â”‚  â”‚  - AsNumber()    â”‚                                      â”‚
â”‚  â”‚  - AsArray()     â”‚                                      â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 3. æ¶æ„åˆ†å±‚è®¾è®¡

### 3.1 æ•´ä½“åˆ†å±‚æ¶æ„

Survey å­åŸŸé‡‡ç”¨ç»å…¸çš„ **DDD åˆ†å±‚æ¶æ„**ï¼š

```text
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    Interface å±‚                          â”‚
â”‚              (gRPC Service, REST Handler)               â”‚
â”‚                                                         â”‚
â”‚  - actor_service.go    (C ç«¯æ¥å£)                       â”‚
â”‚  - questionnaire_handler.go  (ç®¡ç†ç«¯æ¥å£)               â”‚
â”‚  - answersheet_handler.go    (æäº¤ç­”å·æ¥å£)             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                     â”‚ è°ƒç”¨
                     â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                  Application å±‚                          â”‚
â”‚                (åº”ç”¨æœåŠ¡ã€DTOã€ç¼–æ’)                      â”‚
â”‚                                                         â”‚
â”‚  questionnaire/                                         â”‚
â”‚    - lifecycle_service.go    (å‘å¸ƒã€å½’æ¡£)               â”‚
â”‚    - content_service.go      (é—®å·å†…å®¹ç®¡ç†)             â”‚
â”‚    - query_service.go        (é—®å·æŸ¥è¯¢)                 â”‚
â”‚                                                         â”‚
â”‚  answersheet/                                           â”‚
â”‚    - submission_service.go   (æäº¤ç­”å·)                 â”‚
â”‚    - management_service.go   (ç­”å·ç®¡ç†)                 â”‚
â”‚    - scoring_service.go      (ç­”å·è¯„åˆ†)                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                     â”‚ è°ƒç”¨
                     â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    Domain å±‚                             â”‚
â”‚              (èšåˆã€å®ä½“ã€å€¼å¯¹è±¡ã€é¢†åŸŸæœåŠ¡)                â”‚
â”‚                                                         â”‚
â”‚  survey/questionnaire/                                  â”‚
â”‚    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”             â”‚
â”‚    â”‚  èšåˆæ ¹: questionnaire.go           â”‚             â”‚
â”‚    â”‚  å®ä½“: question.go                  â”‚             â”‚
â”‚    â”‚  å€¼å¯¹è±¡: option.go, types.go        â”‚             â”‚
â”‚    â”‚  å·¥å‚: factory.go                   â”‚             â”‚
â”‚    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜             â”‚
â”‚    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”             â”‚
â”‚    â”‚  é¢†åŸŸæœåŠ¡:                          â”‚             â”‚
â”‚    â”‚  - lifecycle.go    (ç”Ÿå‘½å‘¨æœŸ)       â”‚             â”‚
â”‚    â”‚  - baseinfo.go     (åŸºç¡€ä¿¡æ¯)       â”‚             â”‚
â”‚    â”‚  - question_manager.go (é—®é¢˜ç®¡ç†)   â”‚             â”‚
â”‚    â”‚  - versioning.go   (ç‰ˆæœ¬ç®¡ç†)       â”‚             â”‚
â”‚    â”‚  - validator.go    (ä¸šåŠ¡è§„åˆ™éªŒè¯)   â”‚             â”‚
â”‚    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜             â”‚
â”‚                                                         â”‚
â”‚  survey/answersheet/                                    â”‚
â”‚    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”             â”‚
â”‚    â”‚  èšåˆæ ¹: answersheet.go             â”‚             â”‚
â”‚    â”‚  å®ä½“: answer.go                    â”‚             â”‚
â”‚    â”‚  å€¼å¯¹è±¡: answer values (inline)     â”‚             â”‚
â”‚    â”‚  é€‚é…å™¨: validation_adapter.go      â”‚             â”‚
â”‚    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜             â”‚
â”‚                                                         â”‚
â”‚  survey/validation/                                     â”‚
â”‚    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”             â”‚
â”‚    â”‚  é¢†åŸŸæœåŠ¡: validator.go             â”‚             â”‚
â”‚    â”‚  ç­–ç•¥æ¥å£: strategy.go              â”‚             â”‚
â”‚    â”‚  å€¼å¯¹è±¡: rule.go                    â”‚             â”‚
â”‚    â”‚  ç­–ç•¥å®ç°: required.go, min_*.go... â”‚             â”‚
â”‚    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                     â”‚ æŒä¹…åŒ–
                     â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                Infrastructure å±‚                         â”‚
â”‚            (Repository å®ç°ã€æ•°æ®åº“è®¿é—®)                  â”‚
â”‚                                                         â”‚
â”‚  persistence/questionnaire/                             â”‚
â”‚    - questionnaire_repo.go   (MongoDB)                  â”‚
â”‚                                                         â”‚
â”‚  persistence/answersheet/                               â”‚
â”‚    - answersheet_repo.go     (MongoDB)                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 3.2 å„å±‚èŒè´£è¯¦è§£

#### ğŸ“ Domain å±‚ï¼ˆé¢†åŸŸå±‚ï¼‰

**èŒè´£**ï¼š

* å°è£…æ ¸å¿ƒä¸šåŠ¡é€»è¾‘å’Œä¸šåŠ¡è§„åˆ™
* å®šä¹‰é¢†åŸŸæ¨¡å‹ï¼ˆèšåˆã€å®ä½“ã€å€¼å¯¹è±¡ï¼‰
* æä¾›é¢†åŸŸæœåŠ¡å¤„ç†å¤æ‚ä¸šåŠ¡é€»è¾‘
* ä¿æŒé¢†åŸŸçº¯ç²¹æ€§ï¼Œä¸ä¾èµ–å¤–éƒ¨æŠ€æœ¯

**å…³é”®åŸåˆ™**ï¼š

* âœ… å¯Œé¢†åŸŸæ¨¡å‹ï¼ˆè¡Œä¸º + æ•°æ®ï¼‰
* âœ… ä¸ä¾èµ–åº”ç”¨å±‚å’ŒåŸºç¡€è®¾æ–½å±‚
* âœ… ä½¿ç”¨é¢†åŸŸè¯­è¨€å‘½å
* âœ… èšåˆå†…éƒ¨ä¿æŒä¸€è‡´æ€§

**ç¤ºä¾‹ç»„ä»¶**ï¼š

```go
// èšåˆæ ¹
type Questionnaire struct {
    id       meta.ID
    code     meta.Code
    title    string
    version  Version
    status   Status
    questions []Question
}

// é¢†åŸŸæœåŠ¡
type Versioning struct{}
func (Versioning) IncrementMajorVersion(q *Questionnaire) error
```

#### ğŸ“ Application å±‚ï¼ˆåº”ç”¨å±‚ï¼‰

**èŒè´£**ï¼š

* ç¼–æ’é¢†åŸŸå¯¹è±¡å®Œæˆç”¨ä¾‹
* å®šä¹‰åº”ç”¨æœåŠ¡æ¥å£
* å¤„ç† DTO è½¬æ¢ï¼ˆé˜²è…å±‚ï¼‰
* ç®¡ç†äº‹åŠ¡è¾¹ç•Œ
* åè°ƒå¤šä¸ªèšåˆ

**å…³é”®åŸåˆ™**ï¼š

* âœ… è–„åº”ç”¨å±‚ï¼ˆåè°ƒè€Œéå®ç°ä¸šåŠ¡é€»è¾‘ï¼‰
* âœ… äº‹åŠ¡åœ¨åº”ç”¨å±‚å¼€å¯å’Œæäº¤
* âœ… DTO ä¸æ±¡æŸ“é¢†åŸŸå±‚
* âœ… ä¸€ä¸ªåº”ç”¨æœåŠ¡å¯¹åº”ä¸€ç»„ç›¸å…³ç”¨ä¾‹

**ç¤ºä¾‹ç»„ä»¶**ï¼š

```go
// åº”ç”¨æœåŠ¡
type LifecycleService struct {
    repo       Repository
    lifecycle  questionnaire.Lifecycle
    versioning questionnaire.Versioning
    validator  questionnaire.Validator
}

// ç”¨ä¾‹æ–¹æ³•
func (s *LifecycleService) PublishQuestionnaire(ctx context.Context, code string) error {
    // 1. åŠ è½½èšåˆ
    // 2. è°ƒç”¨é¢†åŸŸæœåŠ¡
    // 3. æŒä¹…åŒ–
}
```

#### ğŸ“ Interface å±‚ï¼ˆæ¥å£å±‚ï¼‰

**èŒè´£**ï¼š

* æä¾›å¤–éƒ¨è®¿é—®æ¥å£ï¼ˆgRPCã€RESTï¼‰
* å‚æ•°éªŒè¯å’Œæ ¼å¼è½¬æ¢
* é”™è¯¯å¤„ç†å’Œæ—¥å¿—è®°å½•
* æƒé™æ ¡éªŒ

**å…³é”®åŸåˆ™**ï¼š

* âœ… æ¥å£åè®®ä¸é¢†åŸŸè§£è€¦
* âœ… å‚æ•°æ ¡éªŒåœ¨æ­¤å±‚å®Œæˆ
* âœ… ç»Ÿä¸€çš„é”™è¯¯å“åº”æ ¼å¼

#### ğŸ“ Infrastructure å±‚ï¼ˆåŸºç¡€è®¾æ–½å±‚ï¼‰

**èŒè´£**ï¼š

* å®ç° Repository æ¥å£
* æ•°æ®åº“è®¿é—®å’Œ ORM æ˜ å°„
* å¤–éƒ¨æœåŠ¡é›†æˆ
* ç¼“å­˜å®ç°

**å…³é”®åŸåˆ™**ï¼š

* âœ… å®ç°é¢†åŸŸå±‚å®šä¹‰çš„æ¥å£
* âœ… æŠ€æœ¯ç»†èŠ‚ä¸æ³„æ¼åˆ°é¢†åŸŸå±‚
* âœ… å¯æ›¿æ¢æ€§ï¼ˆæ˜“äºåˆ‡æ¢æ•°æ®åº“ï¼‰

---

## 4. ç›®å½•ç»“æ„è®¾è®¡

### 4.1 å®é™…ç›®å½•ç»“æ„

```text
internal/apiserver/
â”œâ”€â”€ domain/                          # é¢†åŸŸå±‚
â”‚   â””â”€â”€ survey/                      # Survey å­åŸŸ
â”‚       â”œâ”€â”€ questionnaire/           # Questionnaire èšåˆ
â”‚       â”‚   â”œâ”€â”€ questionnaire.go     # èšåˆæ ¹
â”‚       â”‚   â”œâ”€â”€ types.go             # å€¼å¯¹è±¡ï¼ˆVersionã€Statusï¼‰
â”‚       â”‚   â”œâ”€â”€ question.go          # Question æ¥å£ + å…·ä½“å®ç°
â”‚       â”‚   â”œâ”€â”€ factory.go           # é¢˜å‹å·¥å‚ + æ³¨å†Œå™¨
â”‚       â”‚   â”œâ”€â”€ option.go            # Option å€¼å¯¹è±¡
â”‚       â”‚   â”œâ”€â”€ repository.go        # Repository æ¥å£
â”‚       â”‚   â”‚
â”‚       â”‚   â”œâ”€â”€ lifecycle.go         # ç”Ÿå‘½å‘¨æœŸé¢†åŸŸæœåŠ¡
â”‚       â”‚   â”œâ”€â”€ baseinfo.go          # åŸºç¡€ä¿¡æ¯é¢†åŸŸæœåŠ¡
â”‚       â”‚   â”œâ”€â”€ question_manager.go  # é—®é¢˜ç®¡ç†é¢†åŸŸæœåŠ¡
â”‚       â”‚   â”œâ”€â”€ versioning.go        # ç‰ˆæœ¬ç®¡ç†é¢†åŸŸæœåŠ¡
â”‚       â”‚   â””â”€â”€ validator.go         # ä¸šåŠ¡è§„åˆ™éªŒè¯é¢†åŸŸæœåŠ¡
â”‚       â”‚
â”‚       â”œâ”€â”€ answersheet/             # AnswerSheet èšåˆ
â”‚       â”‚   â”œâ”€â”€ answersheet.go       # èšåˆæ ¹
â”‚       â”‚   â”œâ”€â”€ answer.go            # Answer å®ä½“ + AnswerValue å®ç°
â”‚       â”‚   â”œâ”€â”€ types.go             # å€¼å¯¹è±¡ï¼ˆStatusï¼‰
â”‚       â”‚   â”œâ”€â”€ validation_adapter.go # é€‚é…å™¨ï¼ˆè¿æ¥ validationï¼‰
â”‚       â”‚   â””â”€â”€ repository.go        # Repository æ¥å£
â”‚       â”‚
â”‚       â””â”€â”€ validation/              # Validation å­åŸŸ
â”‚           â”œâ”€â”€ validator.go         # éªŒè¯å™¨é¢†åŸŸæœåŠ¡
â”‚           â”œâ”€â”€ strategy.go          # ValidationStrategy æ¥å£ + æ³¨å†Œå™¨
â”‚           â”œâ”€â”€ rule.go              # ValidationRule å€¼å¯¹è±¡
â”‚           â”œâ”€â”€ required.go          # RequiredStrategy å®ç°
â”‚           â”œâ”€â”€ min_length.go        # MinLengthStrategy å®ç°
â”‚           â”œâ”€â”€ max_length.go        # MaxLengthStrategy å®ç°
â”‚           â”œâ”€â”€ min_value.go         # MinValueStrategy å®ç°
â”‚           â”œâ”€â”€ max_value.go         # MaxValueStrategy å®ç°
â”‚           â”œâ”€â”€ selections.go        # Min/MaxSelectionsStrategy å®ç°
â”‚           â””â”€â”€ pattern.go           # PatternStrategy å®ç°
â”‚
â”œâ”€â”€ application/                     # åº”ç”¨å±‚
â”‚   â””â”€â”€ survey/                      # Survey åº”ç”¨æœåŠ¡
â”‚       â”œâ”€â”€ questionnaire/           # Questionnaire åº”ç”¨æœåŠ¡
â”‚       â”‚   â”œâ”€â”€ interface.go         # åº”ç”¨æœåŠ¡æ¥å£å®šä¹‰
â”‚       â”‚   â”œâ”€â”€ lifecycle_service.go # ç”Ÿå‘½å‘¨æœŸåº”ç”¨æœåŠ¡
â”‚       â”‚   â”œâ”€â”€ content_service.go   # å†…å®¹ç®¡ç†åº”ç”¨æœåŠ¡
â”‚       â”‚   â”œâ”€â”€ query_service.go     # æŸ¥è¯¢åº”ç”¨æœåŠ¡
â”‚       â”‚   â””â”€â”€ dto.go               # DTO å®šä¹‰
â”‚       â”‚
â”‚       â””â”€â”€ answersheet/             # AnswerSheet åº”ç”¨æœåŠ¡
â”‚           â”œâ”€â”€ interface.go         # åº”ç”¨æœåŠ¡æ¥å£å®šä¹‰
â”‚           â”œâ”€â”€ submission_service.go # æäº¤åº”ç”¨æœåŠ¡
â”‚           â”œâ”€â”€ management_service.go # ç®¡ç†åº”ç”¨æœåŠ¡
â”‚           â”œâ”€â”€ scoring_service.go   # è¯„åˆ†åº”ç”¨æœåŠ¡
â”‚           â””â”€â”€ dto.go               # DTO å®šä¹‰
â”‚
â”œâ”€â”€ interface/                       # æ¥å£å±‚
â”‚   â”œâ”€â”€ grpc/
â”‚   â”‚   â””â”€â”€ service/
â”‚   â”‚       â”œâ”€â”€ actor_service.go     # C ç«¯ Actor æœåŠ¡
â”‚   â”‚       â”œâ”€â”€ questionnaire.go     # é—®å· gRPC æœåŠ¡
â”‚   â”‚       â””â”€â”€ answersheet.go       # ç­”å· gRPC æœåŠ¡
â”‚   â”‚
â”‚   â””â”€â”€ restful/
â”‚       â””â”€â”€ handler/
â”‚           â”œâ”€â”€ questionnaire_handler.go
â”‚           â””â”€â”€ answersheet_handler.go
â”‚
â””â”€â”€ infra/                           # åŸºç¡€è®¾æ–½å±‚
    â””â”€â”€ persistence/
        â”œâ”€â”€ questionnaire/
        â”‚   â””â”€â”€ questionnaire_repo.go
        â””â”€â”€ answersheet/
            â””â”€â”€ answersheet_repo.go
```

### 4.2 ç›®å½•ç»„ç»‡åŸåˆ™

#### 1ï¸âƒ£ æŒ‰èšåˆåˆ’åˆ†ï¼ˆè€ŒéæŠ€æœ¯å±‚ï¼‰

```text
âŒ ä¸å¥½çš„ç»„ç»‡æ–¹å¼ï¼ˆæŒ‰æŠ€æœ¯å±‚åˆ’åˆ†ï¼‰ï¼š
survey/
  â”œâ”€â”€ entities/      (æ‰€æœ‰å®ä½“æ··åœ¨ä¸€èµ·)
  â”œâ”€â”€ services/      (æ‰€æœ‰æœåŠ¡æ··åœ¨ä¸€èµ·)
  â””â”€â”€ repositories/  (æ‰€æœ‰ä»“å‚¨æ··åœ¨ä¸€èµ·)

âœ… å¥½çš„ç»„ç»‡æ–¹å¼ï¼ˆæŒ‰èšåˆåˆ’åˆ†ï¼‰ï¼š
survey/
  â”œâ”€â”€ questionnaire/  (Questionnaire èšåˆçš„æ‰€æœ‰å†…å®¹)
  â”œâ”€â”€ answersheet/    (AnswerSheet èšåˆçš„æ‰€æœ‰å†…å®¹)
  â””â”€â”€ validation/     (Validation å­åŸŸçš„æ‰€æœ‰å†…å®¹)
```

**ä¼˜åŠ¿**ï¼š

* é«˜å†…èšï¼šç›¸å…³ä»£ç åœ¨ä¸€èµ·ï¼Œæ˜“äºç†è§£å’Œä¿®æ”¹
* æ¸…æ™°çš„è¾¹ç•Œï¼šæ¯ä¸ªæ–‡ä»¶å¤¹ä»£è¡¨ä¸€ä¸ªèšåˆ
* æ˜“äºé‡æ„ï¼šç§»åŠ¨èšåˆåªéœ€ç§»åŠ¨ä¸€ä¸ªæ–‡ä»¶å¤¹

#### 2ï¸âƒ£ é¢†åŸŸæœåŠ¡ä¸èšåˆæ ¹å¹³çº§

```text
questionnaire/
  â”œâ”€â”€ questionnaire.go    # èšåˆæ ¹
  â”œâ”€â”€ lifecycle.go        # é¢†åŸŸæœåŠ¡ï¼ˆå¹³çº§ï¼‰
  â”œâ”€â”€ versioning.go       # é¢†åŸŸæœåŠ¡ï¼ˆå¹³çº§ï¼‰
  â””â”€â”€ validator.go        # é¢†åŸŸæœåŠ¡ï¼ˆå¹³çº§ï¼‰
```

**åŸå› **ï¼š

* é¢†åŸŸæœåŠ¡ä¸å±äºèšåˆæ ¹å†…éƒ¨
* é¢†åŸŸæœåŠ¡å¯ä»¥è·¨å¤šä¸ªèšåˆæ ¹æ“ä½œ
* å¹³çº§ç»“æ„ä½“ç°äº†å®ƒä»¬çš„ç‹¬ç«‹æ€§

#### 3ï¸âƒ£ æ¥å£ä¸å®ç°åˆ†ç¦»

```text
Question (æ¥å£) â†’ question.go (åŒ…å«æ‰€æœ‰å…·ä½“å®ç°)
AnswerValue (æ¥å£) â†’ answer.go (åŒ…å«æ‰€æœ‰å…·ä½“å®ç°)
ValidationStrategy (æ¥å£) â†’ å¤šä¸ª *_strategy.go æ–‡ä»¶
```

**çµæ´»æ€§**ï¼š

* å°å‹å®ç°ï¼šæ¥å£ä¸å®ç°åœ¨åŒä¸€æ–‡ä»¶ï¼ˆQuestionã€AnswerValueï¼‰
* å¤§å‹å®ç°ï¼šæ¯ä¸ªç­–ç•¥ç‹¬ç«‹æ–‡ä»¶ï¼ˆValidationStrategyï¼‰

---

## 5. æ ¸å¿ƒè®¾è®¡æ¨¡å¼æ¦‚è§ˆ

Survey å­åŸŸå¤§é‡ä½¿ç”¨è®¾è®¡æ¨¡å¼æ¥ä¿è¯æ‰©å±•æ€§å’Œå¯ç»´æŠ¤æ€§ï¼š

### 5.1 æ³¨å†Œå™¨æ¨¡å¼ï¼ˆRegistry Patternï¼‰

**åº”ç”¨åœºæ™¯**ï¼š

* âœ… é¢˜å‹å·¥å‚æ³¨å†Œï¼ˆQuestionFactoryï¼‰
* âœ… æ ¡éªŒç­–ç•¥æ³¨å†Œï¼ˆValidationStrategyï¼‰

**æ ¸å¿ƒæ€æƒ³**ï¼š

* å°†"ç±»å‹"åˆ°"å·¥å‚/ç­–ç•¥"çš„æ˜ å°„å…³ç³»å­˜å‚¨åœ¨æ³¨å†Œè¡¨ä¸­
* é€šè¿‡ `init()` å‡½æ•°è‡ªåŠ¨æ³¨å†Œ
* è¿è¡Œæ—¶æ ¹æ®ç±»å‹æŸ¥æ‰¾å¯¹åº”çš„å·¥å‚/ç­–ç•¥

**ä»·å€¼**ï¼š

* æ–°å¢é¢˜å‹/ç­–ç•¥æ— éœ€ä¿®æ”¹æ ¸å¿ƒä»£ç 
* å®ç°äº†å¼€é—­åŸåˆ™ï¼ˆå¯¹æ‰©å±•å¼€æ”¾ã€å¯¹ä¿®æ”¹å°é—­ï¼‰

### 5.2 å·¥å‚æ¨¡å¼ï¼ˆFactory Patternï¼‰

**åº”ç”¨åœºæ™¯**ï¼š

* âœ… Question åˆ›å»ºï¼ˆ`NewQuestion`ï¼‰
* âœ… AnswerValue åˆ›å»ºï¼ˆ`CreateAnswerValueFromRaw`ï¼‰

**æ ¸å¿ƒæ€æƒ³**ï¼š

* ç»Ÿä¸€çš„åˆ›å»ºå…¥å£
* æ ¹æ®å‚æ•°å†³å®šåˆ›å»ºå“ªç§å…·ä½“ç±»å‹
* å°è£…åˆ›å»ºé€»è¾‘

### 5.3 å‚æ•°å®¹å™¨æ¨¡å¼ï¼ˆParameter Object Patternï¼‰

**åº”ç”¨åœºæ™¯**ï¼š

* âœ… QuestionParamsï¼ˆé¢˜ç›®å‚æ•°å®¹å™¨ï¼‰

**æ ¸å¿ƒæ€æƒ³**ï¼š

* åˆ†ç¦»å‚æ•°æ”¶é›†ä¸å¯¹è±¡åˆ›å»º
* QuestionParams åªè´Ÿè´£æ”¶é›†å’Œæ ¡éªŒå‚æ•°
* å·¥å‚å‡½æ•°è´Ÿè´£åˆ›å»ºå¯¹è±¡

**èŒè´£åˆ†ç¦»**ï¼š

```text
QuestionParams  â†’ æ”¶é›†å‚æ•°ã€æ ¡éªŒå‚æ•°ã€æä¾› Getter
QuestionFactory â†’ æ ¹æ®å‚æ•°åˆ›å»ºå¯¹è±¡
NewQuestion     â†’ åè°ƒæµç¨‹
```

### 5.4 å‡½æ•°å¼é€‰é¡¹æ¨¡å¼ï¼ˆFunctional Options Patternï¼‰

**åº”ç”¨åœºæ™¯**ï¼š

* âœ… é¢˜ç›®åˆ›å»ºé…ç½®ï¼ˆWithCodeã€WithStemã€WithOption...ï¼‰

**æ ¸å¿ƒæ€æƒ³**ï¼š

* ä½¿ç”¨å‡½æ•°é—­åŒ…é…ç½®å¯¹è±¡
* é“¾å¼è°ƒç”¨ï¼Œå¯è¯»æ€§å¼º
* æ˜“äºæ‰©å±•æ–°é€‰é¡¹

**ç¤ºä¾‹**ï¼š

```go
question, _ := NewQuestion(
    WithCode(meta.NewCode("Q1")),
    WithStem("æ‚¨çš„æ€§åˆ«æ˜¯ï¼Ÿ"),
    WithQuestionType(TypeRadio),
    WithOption("A", "ç”·", 0),
    WithOption("B", "å¥³", 0),
    WithRequired(),
)
```

### 5.5 ç­–ç•¥æ¨¡å¼ï¼ˆStrategy Patternï¼‰

**åº”ç”¨åœºæ™¯**ï¼š

* âœ… æ ¡éªŒç­–ç•¥ï¼ˆValidationStrategyï¼‰

**æ ¸å¿ƒæ€æƒ³**ï¼š

* å®šä¹‰ç»Ÿä¸€çš„ç­–ç•¥æ¥å£
* æ¯ç§æ ¡éªŒè§„åˆ™å¯¹åº”ä¸€ä¸ªç­–ç•¥å®ç°
* è¿è¡Œæ—¶åŠ¨æ€é€‰æ‹©ç­–ç•¥

**ä¼˜åŠ¿**ï¼š

* é¿å…å¤§é‡ if-else
* æ¯ä¸ªç­–ç•¥ç‹¬ç«‹å®ç°å’Œæµ‹è¯•
* æ˜“äºæ–°å¢ç­–ç•¥

### 5.6 é€‚é…å™¨æ¨¡å¼ï¼ˆAdapter Patternï¼‰

**åº”ç”¨åœºæ™¯**ï¼š

* âœ… AnswerValueAdapterï¼ˆè¿æ¥ answersheet å’Œ validationï¼‰

**æ ¸å¿ƒæ€æƒ³**ï¼š

* å°† AnswerValue é€‚é…ä¸º ValidatableValue
* è§£å†³ä¸¤ä¸ªä¸å…¼å®¹æ¥å£çš„åä½œé—®é¢˜

### 5.7 é¢†åŸŸæœåŠ¡æ¨¡å¼ï¼ˆDomain Service Patternï¼‰

**åº”ç”¨åœºæ™¯**ï¼š

* âœ… Lifecycleï¼ˆç”Ÿå‘½å‘¨æœŸç®¡ç†ï¼‰
* âœ… Versioningï¼ˆç‰ˆæœ¬ç®¡ç†ï¼‰
* âœ… Validatorï¼ˆä¸šåŠ¡è§„åˆ™éªŒè¯ï¼‰
* âœ… QuestionManagerï¼ˆé—®é¢˜ç®¡ç†ï¼‰
* âœ… BaseInfoï¼ˆåŸºç¡€ä¿¡æ¯ç®¡ç†ï¼‰

**æ ¸å¿ƒæ€æƒ³**ï¼š

* å¤„ç†ä¸å±äºå•ä¸ªèšåˆæ ¹çš„ä¸šåŠ¡é€»è¾‘
* é¿å…èšåˆæ ¹è¿‡äºè‡ƒè‚¿
* å¯ä»¥è·¨èšåˆæ“ä½œ

---

## 6. å…³é”®æŠ€æœ¯å†³ç­–

### 6.1 ä¸ºä»€ä¹ˆ Question æ˜¯æ¥å£è€ŒéæŠ½è±¡ç±»ï¼Ÿ

**å†³ç­–**ï¼šQuestion å®šä¹‰ä¸ºæ¥å£ï¼Œå…·ä½“é¢˜å‹å®ç°æ¥å£

**åŸå› **ï¼š

1. Go è¯­è¨€æ¨èé¢å‘æ¥å£ç¼–ç¨‹
2. æ¥å£æ›´çµæ´»ï¼Œæ”¯æŒç»„åˆ
3. é¿å…ç»§æ‰¿å¸¦æ¥çš„è€¦åˆ
4. æ›´å®¹æ˜“æµ‹è¯•ï¼ˆMockï¼‰

### 6.2 ä¸ºä»€ä¹ˆ AnswerValue ä¸ä½¿ç”¨æ³¨å†Œå™¨ï¼Ÿ

**å†³ç­–**ï¼šAnswerValue ä½¿ç”¨ç®€å•çš„å·¥å‚æ–¹æ³•è€Œéæ³¨å†Œå™¨

**åŸå› **ï¼š

1. ç­”æ¡ˆç±»å‹æ•°é‡æœ‰é™ï¼ˆ4 ç§ï¼‰
2. ç­”æ¡ˆç±»å‹ä¸é¢˜å‹ä¸€ä¸€å¯¹åº”
3. ç®€å•çš„æ˜ å°„å…³ç³»ä¸éœ€è¦å¤æ‚çš„æ³¨å†Œå™¨
4. ä»£ç æ›´ç›´è§‚æ˜“æ‡‚

**å¯¹æ¯”**ï¼š

```go
// Question: ä½¿ç”¨æ³¨å†Œå™¨ï¼ˆ6+ ç§é¢˜å‹ï¼Œå¯èƒ½ç»§ç»­æ‰©å±•ï¼‰
RegisterQuestionFactory(TypeRadio, newRadioQuestionFactory)

// AnswerValue: ç›´æ¥å·¥å‚æ–¹æ³•ï¼ˆ4 ç§ç±»å‹ï¼ŒåŸºæœ¬å›ºå®šï¼‰
func CreateAnswerValueFromRaw(qType QuestionType, raw any) (AnswerValue, error) {
    switch qType {
    case TypeRadio:
        return NewOptionValue(raw.(string)), nil
    // ...
    }
}
```

### 6.3 ä¸ºä»€ä¹ˆéœ€è¦ Validation ç‹¬ç«‹å­åŸŸï¼Ÿ

**å†³ç­–**ï¼šå°† Validation æŠ½å–ä¸ºç‹¬ç«‹å­åŸŸ

**åŸå› **ï¼š

1. **å¤ç”¨æ€§**ï¼šæ ¡éªŒè§„åˆ™å¯èƒ½è¢«å…¶ä»–å­åŸŸä½¿ç”¨
2. **æ‰©å±•æ€§**ï¼šæ–°å¢æ ¡éªŒç­–ç•¥ä¸å½±å“èšåˆ
3. **å•ä¸€èŒè´£**ï¼šèšåˆåªå…³å¿ƒä¸šåŠ¡é€»è¾‘ï¼Œä¸å…³å¿ƒæ ¡éªŒç»†èŠ‚
4. **å¯æµ‹è¯•æ€§**ï¼šæ ¡éªŒé€»è¾‘ç‹¬ç«‹æµ‹è¯•

### 6.4 ä¸ºä»€ä¹ˆä½¿ç”¨é¢†åŸŸæœåŠ¡è€Œéèšåˆæ ¹æ–¹æ³•ï¼Ÿ

**å†³ç­–**ï¼šä½¿ç”¨ 5 ä¸ªé¢†åŸŸæœåŠ¡ï¼ˆLifecycleã€Versioning ç­‰ï¼‰è€Œéå…¨éƒ¨æ”¾åœ¨èšåˆæ ¹

**åŸå› **ï¼š

1. **é¿å…èšåˆæ ¹è‡ƒè‚¿**ï¼šèšåˆæ ¹ä¸“æ³¨æ ¸å¿ƒä¸šåŠ¡é€»è¾‘
2. **èŒè´£åˆ†ç¦»**ï¼šæ¯ä¸ªæœåŠ¡å¤„ç†ä¸€ç±»ç›¸å…³æ“ä½œ
3. **å¯æµ‹è¯•æ€§**ï¼šæœåŠ¡ç‹¬ç«‹æµ‹è¯•
4. **å¯å¤ç”¨æ€§**ï¼šæœåŠ¡å¯èƒ½è¢«å¤šä¸ªèšåˆä½¿ç”¨

---

## 7. ä¸‹ä¸€æ­¥é˜…è¯»

æ ¹æ®æ‚¨çš„éœ€æ±‚é€‰æ‹©åç»­æ–‡æ¡£ï¼š

### ğŸ“š æ·±å…¥ç†è§£è®¾è®¡

* **[11-04-02 Questionnaire èšåˆè®¾è®¡](./11-04-02-Questionnaireèšåˆè®¾è®¡.md)** - æœ€å¤æ‚çš„èšåˆï¼ŒåŒ…å«é¢˜å‹è®¾è®¡ã€é¢†åŸŸæœåŠ¡
* **[11-04-04 Validation å­åŸŸè®¾è®¡](./11-04-04-Validationå­åŸŸè®¾è®¡.md)** - ç­–ç•¥æ¨¡å¼çš„å®Œæ•´å®ç°

### ğŸ› ï¸ å®æˆ˜åº”ç”¨

* **[11-04-05 åº”ç”¨æœåŠ¡å±‚è®¾è®¡](./11-04-05-åº”ç”¨æœåŠ¡å±‚è®¾è®¡.md)** - å¦‚ä½•ä½¿ç”¨é¢†åŸŸå¯¹è±¡
* **[11-04-07 æ‰©å±•æŒ‡å—](./11-04-07-æ‰©å±•æŒ‡å—.md)** - å¦‚ä½•æ–°å¢é¢˜å‹ã€ç­”æ¡ˆã€æ ¡éªŒç­–ç•¥

### ğŸ¯ æ¨¡å¼å­¦ä¹ 

* **[11-04-06 è®¾è®¡æ¨¡å¼åº”ç”¨æ€»ç»“](./11-04-06-è®¾è®¡æ¨¡å¼åº”ç”¨æ€»ç»“.md)** - æ‰€æœ‰æ¨¡å¼çš„æ€»ç»“å’Œå¯¹æ¯”

---

> **ç›¸å…³æ–‡æ¡£**ï¼š
>
> * [Survey å­åŸŸè®¾è®¡ç³»åˆ—](./11-04-Surveyå­åŸŸè®¾è®¡ç³»åˆ—.md) - ç³»åˆ—æ–‡æ¡£ç´¢å¼•
> * ã€Š11-01-é—®å·&é‡è¡¨BCé¢†åŸŸæ¨¡å‹æ€»è§ˆ-v2.mdã€‹ - BC æ•´ä½“è®¾è®¡
> * ã€Š11-02-qs-apiserveré¢†åŸŸå±‚ä»£ç ç»“æ„è®¾è®¡-v2.mdã€‹ - ä»£ç ç»“æ„è®¾è®¡
